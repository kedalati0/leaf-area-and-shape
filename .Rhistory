head(arch)
arch= subset(arch, select = c("trip","mm","dd","plantID", "dbh", "tnlc", "cii", "nl", "lblade")) # simplify architecture data frame
names(architect)[4] = "id"
head(arch)
# Merge architecture and leaf area data
aa = merge(arch,area,by="id")
# Sapling architecture
arch = read.csv("architect.csv") # load raw architecture data
arch= subset(arch, select = c("trip","mm","dd","plantID", "dbh", "tnlc", "cii", "nl", "lblade")) # simplify architecture data frame
names(architect)[4] = "id"
head(arch)
names(arch)[4] = "id"
head(arch)
# Merge architecture and leaf area data
aa = merge(arch,area,by="id")
head(aa)
head(arch)
# Species identities
spec = read.csv("traits.csv") # load raw trait data frame
head(spec)
# Species identities
mass = read.csv("traits.csv") # load raw trait data frame
head(mass)
mass$sp = paste(mass$gen,mass$epi) # create new column with species names
mass$sp
# Species identities
mass = read.csv("traits.csv") # load raw trait data frame
mass$sp = paste(mass$gen,mass$epi) # create new column with species names
head(mass)
mass = subset(mass,select=c("plantID","sp","ldm"))
head(mass)
names(mass)[1]
names(mass)[1] = "id"
head(mass)
# Putting things together...
aa = merge(arch,mass,by="id")
head(aa)
aa = order(aa$sp,aa$id)
head(aa)
# Putting things together...
aa = merge(arch,mass,by="id") # merge arch and mass (individual level data)
aa = aa[order(aa$sp,aa$id),]
head(aa)
# Putting things together...
aa = merge(arch,mass,by="id") # merge arch and mass (individual level data)
head(aa)
order(aa$sp,aa$id)
aa = aa[order(aa$sp,aa$id),]
head(aa)
# Putting things together...
aa = merge(arch,mass,by="id") # merge arch and mass (individual level data)
aa = aa[order(aa$sp,aa$id),]
nrow(aa)
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
am = am[order(am$sp,am$id),] # organize by species, then by id
nrow(am) # 1090
aa = subset(aa,!ia.na()) # remove non-identified saplings
aa = subset(aa,!is.na()) # remove non-identified saplings
aa = subset(aa,!is.na(sp)) # remove non-identified saplings
nrow(aa)
aa = subset(aa,sp=="") # remove non-identified saplings
nrow(aa)
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
am = am[order(am$sp,am$id),] # organize by species, then by id
nrow(am) # 1090
am = subset(am,!sp=="") # remove non-identified saplings
nrow(am)
subset(am,sp=="")
subset(am,sp==" ")
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
am = am[order(am$sp,am$id),] # organize by species, then by id
nrow(am) # 1090
am = subset(am,!sp==" ") # remove non-identified saplings
nrow(am)
head(am)
subset(am,is.na(ldm))
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
am = am[order(am$sp,am$id),] # organize by species, then by id
nrow(am) # 1090
am = subset(am,!sp==" " & !sp=="NA NA") # remove non-identified saplings
nrow(am) # 1061
nrow(am)
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
am = am[order(am$sp,am$id),] # organize by species, then by id
nrow(am) # 1090
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm)) # remove non-identified saplings and entries with missing data
nrow(am) # 1056
head(am)
subset(am,!is.na(ldm))
head(am)
subset(am,is.na(tnlc))
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
am = am[order(am$sp,am$id),] # organize by species, then by id
nrow(am) # 1090
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc)) # remove non-identified saplings and entries with missing data
nrow(am) # 1050
head(am)
subset(am,is.na(cii))
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii)) # remove non-identified saplings and entries with missing data
nrow(am) # 725
subset(am,is.na(dbh))
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
am = am[order(am$sp,am$id),] # organize by species, then by id
nrow(am) # 1090
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh)) # remove non-identified saplings and entries with missing data
nrow(am) # 724
head(am)
head(am)
# Species identities
mao = read.csv("RAW_mao.csv")
head(mao)
area = read.csv("Leaf Area and Shape From Trip5-10.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); str(area)
area  = area[215:4540,] # remove empty lines
tmp = strsplit(area$file.name, "_") # split file name in order to extract plant ID
tmp = lapply(tmp, function(x) x[1]) # extract plant ID
tmp = unlist(tmp) # coerce the list into a vector
head(tmp)
tmp[tmp=="230182POUFUL"]= 230182
tmp[tmp=="230378LACSP1"]= 230378
tmp = as.numeric(tmp) # coerce a character vector into a numeric one (plants without a valid ID will be assigned NAs)
area$plant.ID = tmp # fill plant ID column in the original data frame
area = subset(area,select=c("plant.ID","Area.pred..cm.2.")) # reduce table
names(area) = c("id","area") # fix some column names
head(area)
arch = read.csv("architect.csv") # load raw architecture data
arch= subset(arch, select = c("trip","mm","dd","plantID", "dbh", "tnlc", "cii", "nl", "lblade")) # simplify architecture data frame
names(arch)[4] = "id"
head(arch)
mass = read.csv("traits.csv") # load raw trait data frame
mass$sp = paste(mass$gen,mass$epi) # create new column with species names
mass = subset(mass,select=c("plantID","ldm"))
names(mass)[1] = "id"
head(mass)
# Species identities
mao = read.csv("RAW_mao.csv")
head(mao)
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
head(am)
head(mao)
mao$sp = paste(mao$gen,mao$epi)
head(mao)
colnames(mao)
names(mao)[which(names=="dbh")]
names(mao)[which(names(mao)=="dbh")]
# Species identities and initial dbh
mao = read.csv("RAW_mao.csv") # plot data
mao$sp = paste(mao$gen,mao$epi) # add species column
names(mao)[which(names(mao)=="dbh")] = "dbh0"
head(mao)
# Putting things together...
am = merge(arch,mass,by="id") # merge arch and mass (individual level data)
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh")],by="id"); nrow(am)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am)
head(am)
am = am[order(am$sp,am$id),] # organize by species, then by id
head(am)
nrow(am) # 1090
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = am[order(am$sp,am$id),] # organize by species, then by id
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh) & !is.na(dbh0)) # remove non-identified saplings and entries with missing data
head(am); nrow(am) # 719
table(am$sp)
table(am$sp)
aggregate(area~id,area,mean)
area = aggregate(area~id,area,mean) # average leaf area per plant
head(area)
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = am[order(am$sp,am$id),] # organize by species, then by id
head(area)
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = merge(am,area); nrow(am) # add mean leaf area per plant
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
nrow(area)
# Leaf area
area = read.csv("Leaf Area and Shape From Trip5-10.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); str(area)
area  = area[215:4540,] # remove empty lines
tmp = strsplit(area$file.name, "_") # split file name in order to extract plant ID
tmp = lapply(tmp, function(x) x[1]) # extract plant ID
tmp = unlist(tmp) # coerce the list into a vector
head(tmp)
# Some small fixs to plant ids
tmp[tmp=="230182POUFUL"]= 230182
tmp[tmp=="230378LACSP1"]= 230378
tmp = as.numeric(tmp) # coerce a character vector into a numeric one (plants without a valid ID will be assigned NAs)
area$plant.ID = tmp # fill plant ID column in the original data frame
area = subset(area,select=c("plant.ID","Area.pred..cm.2.")) # reduce table
names(area) = c("id","area") # fix some column names
unique(area$id)
length(unique(area$id))
# Leaf area
area = read.csv("Leaf Area and Shape From Trip5-10.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); str(area)
area  = area[215:4540,] # remove empty lines
tmp = strsplit(area$file.name, "_") # split file name in order to extract plant ID
tmp = lapply(tmp, function(x) x[1]) # extract plant ID
tmp = unlist(tmp) # coerce the list into a vector
head(tmp)
# Some small fixs to plant ids
tmp[tmp=="230182POUFUL"]= 230182
tmp[tmp=="230378LACSP1"]= 230378
tmp = as.numeric(tmp) # coerce a character vector into a numeric one (plants without a valid ID will be assigned NAs)
area$plant.ID = tmp # fill plant ID column in the original data frame
area = subset(area,select=c("plant.ID","Area.pred..cm.2.")) # reduce table
names(area) = c("id","area") # fix some column names
area = aggregate(area~id,area,mean) # average leaf area per plant
head(area); nrow(area)
# Sapling architecture
arch = read.csv("architect.csv") # load raw architecture data
arch= subset(arch, select = c("trip","mm","dd","plantID", "dbh", "tnlc", "cii", "nl", "lblade")) # simplify architecture data frame
names(arch)[4] = "id"
head(arch)
# Leaf mass
mass = read.csv("traits.csv") # load raw trait data frame
mass$sp = paste(mass$gen,mass$epi) # create new column with species names
mass = subset(mass,select=c("plantID","ldm"))
names(mass)[1] = "id"
head(mass)
# Species identities and initial dbh
mao = read.csv("RAW_mao.csv") # plot data
mao$sp = paste(mao$gen,mao$epi) # add species column
names(mao)[which(names(mao)=="dbh")] = "dbh0"
head(mao)
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = merge(am,area); nrow(am) # add mean leaf area per plant
am = am[order(am$sp,am$id),] # organize by species, then by id
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh) & !is.na(dbh0)) # remove non-identified saplings and entries with missing data
head(am); nrow(am) # 733
table(am$sp)
range(table(am$sp))
hist(table(am$sp))
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh) & !is.na(dbh0)) # remove non-identified saplings and entries with missing data
head(am); nrow(am) # 442
subset(area,is.na(area))
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
head(am); nrow(am) # 442 -> it could be 733
area$id
am$id
sum(am$id%in%area$id)
sum(!am$id%in%area$id)
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
#am = merge(am,area); nrow(am) # add mean leaf area per plant
am = am[order(am$sp,am$id),] # organize by species, then by id
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh) & !is.na(dbh0)) # remove non-identified saplings and entries with missing data
head(am); nrow(am) # 442 -> it could be 733
sum(am$id%in%area$id)
sum(!am$id%in%area$id)
which(am$id%in%area$id)
am[which(am$id%in%area$id),]
am[which(!am$id%in%area$id),]
am[which(!am$id%in%area$id),"id"]
am[which(!am$id%in%area$id),]
am[which(!am$id%in%area$id),"trip"]
hist(am[which(!am$id%in%area$id),"trip"])
write.csv(am[which(!am$id%in%area$id),],"missingIDs.csv",row.names=F)
# Leaf area
area = read.csv("Leaf Area and Shape From Trip5-10.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); str(area)
area  = area[215:4540,] # remove empty lines
tmp = strsplit(area$file.name, "_") # split file name in order to extract plant ID
tmp = lapply(tmp, function(x) x[1]) # extract plant ID
tmp = unlist(tmp) # coerce the list into a vector
head(tmp)
# Some small fixs to plant ids
tmp[tmp=="230182POUFUL"]= 230182
tmp[tmp=="230378LACSP1"]= 230378
tmp = as.numeric(tmp) # coerce a character vector into a numeric one (plants without a valid ID will be assigned NAs)
area$plant.ID = tmp # fill plant ID column in the original data frame
area = subset(area,select=c("plant.ID","Area.pred..cm.2.")) # reduce table
names(area) = c("id","area") # fix some column names
area = aggregate(area~id,area,mean) # average leaf area per plant
head(area); nrow(area)
# Sapling architecture
arch = read.csv("architect.csv") # load raw architecture data
arch= subset(arch, select = c("trip","mm","dd","plantID", "dbh", "tnlc", "cii", "nl", "lblade")) # simplify architecture data frame
names(arch)[4] = "id"
head(arch)
# Leaf mass
mass = read.csv("traits.csv") # load raw trait data frame
mass$sp = paste(mass$gen,mass$epi) # create new column with species names
mass = subset(mass,select=c("plantID","ldm"))
names(mass)[1] = "id"
head(mass)
# Species identities and initial dbh
mao = read.csv("RAW_mao.csv") # plot data
mao$sp = paste(mao$gen,mao$epi) # add species column
names(mao)[which(names(mao)=="dbh")] = "dbh0"
head(mao)
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
#am = merge(am,area); nrow(am) # add mean leaf area per plant
am = am[order(am$sp,am$id),] # organize by species, then by id
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh) & !is.na(dbh0)) # remove non-identified saplings and entries with missing data
head(am); nrow(am) # 442 -> it could be 733
hist(table(am$sp))
write.csv(am,"DATA.csv",row.names=F)
head(am)
# Leaf area
area = read.csv("Leaf Area and Shape From Trip5-10.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); str(area)
area  = area[215:4540,] # remove empty lines
tmp = strsplit(area$file.name, "_") # split file name in order to extract plant ID
tmp = lapply(tmp, function(x) x[1]) # extract plant ID
tmp = unlist(tmp) # coerce the list into a vector
head(tmp)
# Some small fixs to plant ids
tmp[tmp=="230182POUFUL"]= 230182
tmp[tmp=="230378LACSP1"]= 230378
tmp = as.numeric(tmp) # coerce a character vector into a numeric one (plants without a valid ID will be assigned NAs)
area$plant.ID = tmp # fill plant ID column in the original data frame
area = subset(area,select=c("plant.ID","Area.pred..cm.2.")) # reduce table
names(area) = c("id","area") # fix some column names
area = aggregate(area~id,area,mean) # average leaf area per plant
head(area); nrow(area)
# Sapling architecture
arch = read.csv("architect.csv") # load raw architecture data
arch= subset(arch, select = c("trip","mm","dd","plantID", "dbh", "tnlc", "cii", "nl", "lblade")) # simplify architecture data frame
names(arch)[4] = "id"
head(arch)
# Leaf mass
mass = read.csv("traits.csv") # load raw trait data frame
mass$sp = paste(mass$gen,mass$epi) # create new column with species names
mass = subset(mass,select=c("plantID","ldm"))
names(mass)[1] = "id"
head(mass)
# Species identities and initial dbh
mao = read.csv("RAW_mao.csv") # plot data
mao$sp = paste(mao$gen,mao$epi) # add species column
names(mao)[which(names(mao)=="dbh")] = "dbh0"
head(mao)
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = merge(am,area); nrow(am) # add mean leaf area per plant
am = am[order(am$sp,am$id),] # organize by species, then by id
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh) & !is.na(dbh0)) # remove non-identified saplings and entries with missing data
head(am); nrow(am) # 442 -> it could be 733
hist(table(am$sp))
write.csv(am,"DATA.csv",row.names=F)
HEAD(AM)
head(am)
am[8,]
ls()
ls()
# Leaf area
area = read.csv("RAW_leafSize.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area)
str(area)
area[215:4540,]
tail(area)
strsplit(area$file.name, "_")
head(area)
tmp=="230182POUFUL"
is.numeric(area$Plant_ID)
area$Plant_ID
as.numeric(area$Plant_ID)
# Get rid of non-identified entries
is.numeric(as.numeric(area$Plant_ID))
?is.numeric
# Get rid of non-identified entries
is.na(as.numeric(area$Plant_ID))
!is.na(as.numeric(area$Plant_ID))
# Get rid of non-identified entries
area[!is.na(as.numeric(area$Plant_ID)),]
which(!is.na(as.numeric(area$Plant_ID)))
as.numeric(area$Plant_ID)
which(!is.na(as.numeric(area$Plant_ID)))
tmp = which(!is.na(as.numeric(area$Plant_ID)))
is.na(tmp)
any(is.na(tmp))
!is.na(as.numeric(area$Plant_ID))
which(!is.na(as.numeric(area$Plant_ID)))
# Get rid of non-identified entries
area[which(!is.na(as.numeric(area$Plant_ID))),]
area = read.csv("RAW_leafSize.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); tail(area); str(area) # check data
# Get rid of non-identified entries
area = area[which(!is.na(as.numeric(area$Plant_ID))),] # exclude problematic ids
# Leaf area
area = read.csv("RAW_leafSize.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); tail(area); str(area) # check data
nrow(area) #
# Get rid of non-identified entries
area = area[which(!is.na(as.numeric(area$Plant_ID))),] # exclude problematic ids
nrow(area)
head(area)
# Convert leaf area into cm^2
area$area = area$Area/13819.17803
head(area)
sqrt(48)
sqrt(148)
area = read.csv("RAW_leafSize.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); tail(area); str(area) # check data
nrow(area) # 21069
# Get rid of non-identified entries
area = area[which(!is.na(as.numeric(area$Plant_ID))),] # exclude problematic ids
nrow(area) # 20624
# Convert leaf area into cm^2
area$area.cm2 = area$Area/13819.17803
head(area.cm2)
# Convert leaf area into cm^2
area$area.cm2 = area$Area/13819.17803
head(area.cm2)
head(area)
# Calculate the average per plant
aarea = aggregate(area.cm2~Plant_ID,area,mean) # average leaf area per plant
head(area); nrow(area)
head(aarea); nrow(aarea) #
# Sapling architecture
arch = read.csv("architect.csv") # load raw architecture data
arch= subset(arch, select = c("trip","mm","dd","plantID", "dbh", "tnlc", "cii", "nl", "lblade")) # simplify architecture data frame
names(arch)
names(arch)[4] = "Plant_ID"
head(arch)
# Leaf mass
mass = read.csv("traits.csv") # load raw trait data frame
mass$sp = paste(mass$gen,mass$epi) # create new column with species names
# Leaf mass
mass = read.csv("traits.csv") # load raw trait data frame
mass = subset(mass,select=c("plantID","ldm"))
names(mass)[1] = "Plant_ID"
head(mass)
# Species identities and initial dbh
mao = read.csv("RAW_mao.csv") # plot data
mao$sp = paste(mao$gen,mao$epi) # add species column
names(mao)[which(names(mao)=="dbh")] = "dbh0"
head(mao)
am = merge(arch,mass,by="Plant_ID"); nrow(am)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am)
am = merge(am,mao[,c("id","sp","dbh0")],by="Plant_ID"); nrow(am) # add species identities and plant initial size
am = merge(am,mao[,c("Plant_ID","sp","dbh0")],by="Plant_ID"); nrow(am) # add species identities and plant initial size
head(mao)
# Leaf area
area = read.csv("RAW_leafSize.csv", stringsAsFactors = FALSE) # load raw leaf area data
head(area); tail(area); str(area) # check data
names(area)[4]
names(area)[4] = "id"
head(area); tail(area); str(area) # check data
nrow(area) # 21069
# Get rid of non-identified entries
area = area[which(!is.na(as.numeric(area$id))),] # exclude problematic ids
nrow(area) # 20624
# Convert leaf area into cm^2
area$area.cm2 = area$Area/13819.17803
head(area)
# Calculate the average per plant
aarea = aggregate(area.cm2~id,area,mean) # average leaf area per plant
head(aarea); nrow(aarea) # 2798
# Sapling architecture
arch = read.csv("architect.csv") # load raw architecture data
arch= subset(arch, select = c("trip","mm","dd","plantID", "dbh", "tnlc", "cii", "nl", "lblade")) # simplify architecture data frame
names(arch)[4] = "id"
head(arch)
# Leaf mass
mass = read.csv("traits.csv") # load raw trait data frame
mass = subset(mass,select=c("plantID","ldm"))
names(mass)[1] = "id"
head(mass)
# Species identities and initial dbh
mao = read.csv("RAW_mao.csv") # plot data
mao$sp = paste(mao$gen,mao$epi) # add species column
names(mao)[which(names(mao)=="dbh")] = "dbh0"
head(mao)
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = merge(am,area); nrow(am) # add mean leaf area per plant
# Putting things together...
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = merge(am,aarea); nrow(am) # add mean leaf area per plant
am = am[order(am$sp,am$id),] # organize by species, then by id
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh) & !is.na(dbh0)) # remove non-identified saplings and entries with missing data
head(am); nrow(am) # 442 -> it could be 733
am = merge(arch,mass,by="id"); nrow(am) # merge arch and mass (individual level data)
am = merge(am,mao[,c("id","sp","dbh0")],by="id"); nrow(am) # add species identities and plant initial size
am = merge(am,aarea); nrow(am) # add mean leaf area per plant
am = am[order(am$sp,am$id),] # organize by species, then by id
am = subset(am,!sp==" " & !sp=="NA NA" & !is.na(ldm) & !is.na(tnlc) & !is.na(cii) & !is.na(dbh) & !is.na(dbh0)) # remove non-identified saplings and entries with missing data
head(am); nrow(am) # 658
length(unique(am$sp)) #
hist(table(am$sp))
write.csv(am,"DATA.csv",row.names=F)
